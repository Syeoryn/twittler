<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
	<link rel="stylesheet" type="text/css" href = "twittler.css"> 
	<title>Twittler</title>
  </head>

  <body>
	<div class="update">0 new Tweets</div>
    <script>

      $(document).ready(function(){
        var $body = $('body');
//	        $body.html('');
		
		var numberPosted = 0
		
		var makeTweet = function(index){
			var tweet = streams.home[index];
			var $tweet = $('<div></div>');
			var date = tweet.created_at.toTimeString();
			var time = date.slice(0,date.indexOf(' '));
			$tweet.text('@' + tweet.user + '  --  ' + time + ': ' + tweet.message);
			$('.update').after($tweet);
		}
		
		var updateTweets = function(){
			while(numberPosted < streams.home.length){
				makeTweet(numberPosted);
				numberPosted ++;
			}
		}
		
		$('.update').on('click',function(){
			updateTweets();
			$('.update').text('0 new Tweets');
		});
		
		updateTweets();		
		setInterval(function(){
			$('.update').text( streams.home.length - numberPosted + " new Tweets")
		}, 3000);
		
		
      });

    </script>
  </body>
</html>
